<!DOCTYPE html>
<html ng-app = "app">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Busqueda</title>
  
  
  <!----Calendario------->
  <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
   
  <link rel="stylesheet" href="\node_modules\bootstrap\dist\css\bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="\node_modules\bootstrap\dist\js\bootstrap.min.js"></script>
  <link href="\node_modules\bootstrap\dist\css\bootstrap-datetimepicker.min.css" rel="stylesheet">
  <script type="text/javascript"src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
    <!--script type="text/javascript"src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script-->
    <script type="text/javascript"src="\node_modules\bootstrap\dist\js\bootstrap-datetimepicker.min.js"></script>

	
	<!-- Angular--> 
	<script src="\node_modules\bootstrap\dist\js\angular.min.js"></script>
	
	
    </head>
	
    <body ng-app ng-controller = "ControllerAngular">
    <nav class="navbar navbar-default" style="background-color:#60161E;">
    <div class="container-fluid">
    <!-- REsponsive -->
    <div class="navbar-header" >
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
  <IMG SRC="../../../../img/situn2.png" WIDTH=100 HEIGHT=100  class="nav navbar-nav navbar-right">
    </div>

    <!-- Menu -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav" style="margin-top:7px;">
        <li ><a href="../../../../index.html"style="color:#FFFFFF;">Ingreso Correspondencia</span> </a></li>
        <li><a href="\node_modules\bootstrap\dist\paginas\Enlace de Documentos.html"style="color:#FFFFFF;">Enlace Documentos</a></li>
        <li><a href="#"style="color:#FFFFFF;">BÃºsqueda</a></li>
		<li><a href="#"style="color:#FFFFFF;">Reportes</a></li>
		<li><a href="#"style="color:#FFFFFF;">Escanear</a></li>
		<li><a href="#" style="color:#FFFFFF;">Pendientes</a></li>
		<li><a href="#" style="color:#FFFFFF;">Ayuda</a></li>
      </ul>
    
        <IMG SRC="../../../../img/situn2.png" WIDTH=100 HEIGHT=100  class="nav navbar-nav navbar-right">
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
	  
	   
	   <!---Cuerpo--->
	   <body background="../../../../img/situn4.png">
	   
	    
	   <div class="col-md-8" style="margin-left:20px">
         <span class="text-danger"><h2>Tipo de Busqueda</h2></span>
            
  
           
           <form class="navbar-form navbar-left">         
        
             <div   class="form-group ">
             <select class="form-control input-sm"><option value="No oficio">No Oficio
                     <option value="Destinatorio">Destinatorio                                            
                    <option value="Remitente">Remitente                                          
                    <option value="Asunto">Asunto                                      
                    </select> 
               
          
          <input type="text" class="form45" id="buscar"  >
            <input type = "button" class="btn btn-default" id="buscar" value = "Buscar" ng-click="buscar()" >
           <input type = "button"class="btn btn-default" id ="cancelar" value = "Cancelar"  >
            
        </div>
         <p align="left"><p align="left"><div class="table table-bordered">
	<p align="left"><table class="table" id="tabla_busqueda">
		<thead> 
			<tr class="danger">
			<td>#</td>
			<td>Fecha Oficio</td>
			<td>Destinatario </td>
			<td>Copia</td>
			<td>Remitente</td>
			<td>Asunto</td>
			<td>Recibido</td>
			<td>Estado</td>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat = "c in correspondencias">
					<td> {{c.tc_1 }} </td>
					<td> {{c.tc_4 | date:'dd/MM/yyyy'}} </td>
					<td> {{c.tc_5 }} </td>
					<td> {{c.tc_6 }} </td>
					<td> {{c.tc_7 }} </td>
					<td> {{c.tc_8 }} </td>
					<td> {{c.tc_9 }} </td>
					<td> {{c.tc_10 }} </td>
			</tr>
		</tbody>        
	</table>
               </div></p>
      </form>
           
   
	   </div>

		
	   
	   

	   
	   
<script type="text/javascript">

  
let app = angular.module('app', []);


function ControllerAngular($scope)
 {
	$scope.correspondencias = new Array();
	$scope.updateCorrespondencias = c => $scope.correspondencias = c;
	$scope.buscar = _ => busqueda($scope);
		
  }
  
   app.controller('ControllerAngular', ControllerAngular); 
  
  
  
  
 /*   function validar(){

 var B=document.getElementById("buscar");
 
if(B.value==false){
  B.style.borderColor="#FF0000"
  B.title="Digite los datos de busqueda en el campo de texto";
 }
 else{
  B.style.borderColor="#06e6ce"
  B.title="Datos ingresados correctamente";
 }
 

 }*/
 
 
 function busqueda($scope)
 {
	let h3 = document.getElementById('buscar').value;
	 fetch( 'http://localhost:3000/api/TC/BA', {  
    method: 'POST', 
    datatype:'json',
    headers: {  
      "Content-type": "application/x-www-form-urlencoded"  
      } ,
    body: "TC_8="+ h3
      }
	)	 
	.then(res => res.json())
	.then(obj => $scope.$apply( _=>
					$scope.updateCorrespondencias(obj.data))
	.catch(err => console.log('Request failed', err));
 }
     
</script>


    </body>
</html>
